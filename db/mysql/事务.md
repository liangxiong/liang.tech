# 事务


- 原子性（Atomicity）

- 隔离性（Isolation）

- 一致性（Consistency）

- 持久性（Durability）

- 状态：
  - 活动的（active）
  - 部分提交的（partially committed）
  - 失败的（failed）
  - 中止的（aborted）
  - 提交的（committed）


- BEGIN  | START TRANSACTION
  - 事务修饰符
    - START TRANSACTION READ ONLY  开启只读事务
    - START TRANSACTION READ WRITE  读写事务
    - START TRANSACTION WITH CONSISTENT SNAPSHOT 启动一致性读
    - 支持多个修饰符，逗号分隔

- InnoDB和NDB存储引擎支持

- 自动提交 SHOW VARIABLES LIKE 'autocommit';

- 隐式提交：在开启事务后，自动提交，输入了某些语句之后就会悄悄的提交掉前面执行的sql，就像我们输入了COMMIT语句了一样

  - 定义或修改数据库对象的数据定义语言（Data definition language，缩写为：DDL）。

  - 隐式使用或修改mysql数据库中的表
   - ALTER USER、CREATE USER、DROP USER、GRANT、RENAME USER、REVOKE、SET PASSWORD

  - 事务控制或关于锁定的语句： 还没提交或者回滚时就又使用START TRANSACTION或者BEGIN语句开启了另一个事务时，会隐式的提交上一个事务
    - 如：开启新的事务

  - 加载数据的语句 LOAD DATA

  - MySQL复制的一些语句
    - 使用START SLAVE、STOP SLAVE、RESET SLAVE、CHANGE MASTER TO等语句时也会隐式的提交前边语句所属的事务

  - 其它的一些语句
    - 使用ANALYZE TABLE、CACHE INDEX、CHECK TABLE、FLUSH、 LOAD INDEX INTO CACHE、OPTIMIZE TABLE、REPAIR TABLE、RESET等语句也会隐式的提交前边语句所属的事务


- 保存点
  - 开启保存到：SAVEPOINT 保存点名称;
  - 回滚保存点：ROLLBACK [WORK] TO [SAVEPOINT] 保存点名称;
  - 删除保存点：RELEASE SAVEPOINT 保存点名称;
