# 架构

## 层次：从上到下
- server层次 SQL Layer层
- 存储引擎层
- 数据文件层



## 页
- 表空间 段（索引段 + 数据段）
  - 区
    - 空间：1M
    - 包含 64个页
  - 页
    - 空间：16K，叶子节点
    - 至少2条数据：至多8000bytes

- 页合并：
  - 删除记录时，实际上记录并没有被物理删除，记录被标记（flaged）为删除并且它的空间变得允许被其他记录声明使用。
  - 达到MERGE_THRESHOLD（默认页体积的50%）
  - InnoDB会开始寻找最靠近的页（前或后）看看是否可以将两个页合并以优化空间使用

- 页分裂：
  - 修改数据，页满，需要找到新的页来扩展
