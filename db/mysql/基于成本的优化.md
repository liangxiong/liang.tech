#

- 考虑维度：
  - 根据搜索条件，找出所有可能使用的索引 成为：possible keys
  - 计算全表扫描的代价
    - 聚簇索引占用的页面数
    - 该表中的记录数
  - 计算使用不同索引执行查询的代价
  - 对比各种执行方案的代价，找出成本最低的那一个

- 脚本：
  - SHOW TABLE STATUS LIKE 'single_table' \G;
    - Rows
    - Data_length 聚簇索引的页面数量 x 每个页面的大小
    - I/O成本



连接查询总成本 = 单次访问驱动表的成本 + 驱动表扇出数 x 单次访问被驱动表的成本

最小的连接查询成本

系统变量optimizer_search_depth： 成本计算最大表数量

- 成本常数  
  - 读取一个页面花费的成本默认是1.0
  - 检测一条记录是否符合搜索条件的成本默认是0.2
  - SHOW TABLES FROM mysql LIKE '%cost%';
    - server_cost： SELECT * FROM mysql.server_cost;
      -

    - engine_cost SELECT * FROM mysql.engine_cost;

      - 插入针对某个存储引擎的成本常数
        - INSERT INTO mysql.engine_cost VALUES ('InnoDB', 0, 'io_block_read_cost', 2.0, CURRENT_TIMESTAMP, 'increase Innodb I/O cost');
        - FLUSH OPTIMIZER_COSTS;
