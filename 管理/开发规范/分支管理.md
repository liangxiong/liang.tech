# 分支管理

## 分支管理
### 生产分支 master
- 分支只用于发布到线上生产环境
- 等开发完，测试 创建tag


### 测试分支 dev
- 只用于发布到测试环境

### feature 分支
- 每开发一个任务，先建一个feature
- 等feature开发完，merge 到 迭代分支
- 删除feature

### 迭代分支
- 每次迭代创建迭代分支

### bug分支
- 创建 issue 分支
- 等 issue 开发完，merge 到master 发布


## 开发模式
### 自由模式，主干开发模式:
- 合并到主干代码版本，并持续运行自动化测试,目标是尽早整合，尽早找到问题
- 优点：
    - 适合团队：固定组合的小团队，每人负责一个或者多个独立应用
    - 自由度高，用户可以采用任何版本进行打包和部署
- 缺点：代码的版本控制以及质量需要团队自己保证，风险较高；越是多人协作开发场景支持较弱，管理成本较高

### 分支开发模式：
- 每一个需求、任务在单独的分支上进行开发，单元测试和冒烟测试完成后，再与其他分支一起集成，进行集成测试、回归测试、灰度测试、性能测试等过程，最后进行发布
- 优点：
    - 功能分支独立开发和测试，互不干扰；
    - 版本节奏可灵活控制，出现延期的分支可直接退出，代码可迅速剥离；
- 缺点：
    - 每次部署都是临时release分支，可维护性较差；
    - 分支越多，集成越晚，冲突就越多，集成的成本以及测试问题越多，需要控制分支数量；
### git-flow模式：
- 两个长期分支：
    - 主分支（master）：用于存放线上稳定的版本，任何时候在这个分支拿到的，都是稳定的线上版本；
    - 集成分支（develop）：用于集成功能分支，用于各功能分支的集成测试和发布，发布完成后再合并回主干master。
 - 其次，项目存在三种短期分支。完成后merge 到 集成分支或主分支，最终被删掉
     - 功能分支（feature branch）
     - 补丁分支（hotfix branch）
     - 发布分支（release branch）
- 优点：
    - 各分支用途明确，较好的满足了功能并行开发与持续集成诉求；
    - 分支过程与集成测试过程自动化程度较高，可随时交付。
- 缺点：
    - 要求功能分支的质量达到要求，并且通过代码review后，后方可进入集成，对分支代码质量要求高。
