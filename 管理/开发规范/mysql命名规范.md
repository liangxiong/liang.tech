# mysql命名规范

### 字段定义：
- 缘由：
    - 存储的扩展是昂贵的，
    - DDL 语句操作 要锁表
- 约定：
    - 【强制】表必备三字段:id, gmt_create, gmt_modified。 说明:其中id必为主键，类型为unsigned bigint、单表时自增、步长为1。gmt_create, gmt_modified 的类型均为 date_time 类型。
    -  【约定】软删除，约定delete_at字段，null 表示   ？？

- 库
    - 库名 尽量是应用的名称

- 表名功能
    - 表名、字段名必须使用小写字母或数字，禁止出现数字开头，禁止两个下划线中间只出现数字。 正例:getter_admin，task_config，level3_name 反例:GetterAdmin，taskConfig，level_3_name
    - 是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型：unsigned tinyint ( 1表示是，0表示否)，
    - 任何字段如果为非负数，必须是 unsigned
    - 表名不使用复数名词。 说明:表名应该仅仅表示表里面的实体内容，不应该表示实体数量。这和 ruby 中的mongoid 框架相反
    - 禁用保留字，如 desc、range、match、delayed 等，请参考 MySQL 官方保留字。
    - 表名最好是加上“业务名称_表的作用”。让人一眼就懂

- 字段：
    - 数字类型：
        - 小数类型为 decimal，禁止使用 float 和 double
            - float 和 double 在存储的时候，存在精度损失的问题
        - 数字存储的数据范围超过 decimal 的范围，建议将数据拆成整数和小数分开存储
   - 字符串：
       - char: 如果存储的字符串长度几乎相等，该类型。
       - varchar： 是可变长字符串，不预先分配存储空间，长度不要超过 5000
       - text： 存储长度大于5000，定义字段类型为 text，独立出来一张表，用主键来对应，避免影响其它字段索 引效率。
       - 建议： 如果修改字段含义或对字段表示的状态追加时，需要及时更新字段注释。
       - 字段允许适当冗余，以 高性能，但是必须考虑数据同步的情况。冗余字段应遵循:
            - 不是频繁修改的字段。
            - 不是 varchar 超长字段，更不能是 text 字段。 正例:商品类目名称使用频率高，字段长度短，名称基本一成不变，可在相关联的表中冗余存 储类目名称，避免关联查询。

- 分库分表标准：
    - 单表行数超过 500 万行或者单表容量超过 2GB，才推荐进行分库分表。
    - 如果预计三年后的数据量根本达不到这个级别，请不要在创建表时就分库分表。

- 小九九：合适的字符存储长度，不但节约数据库表空间、节约索引存储，更重要的是 升检 索速度。
    - 人的年龄 unsigned tinyint (表示范围0-255，人的寿命不会超过255岁)
    - 海龟 就必须是 smallint
    - 太阳的年龄，就必须是 int
    - 所有恒星的年龄都加起来， 那么就必须使用 bigint
    - ipv4的定义用 unsigned bigint类型

- 索引：
    - 唯一索引名为 uk_字段名，uk_即unique key
    - 普通索引名则为 idx_字段名，idx_即index的简称
    - 业务上具有唯一特性的字段，即使是组合字段，也必须建成唯一索引。 说明:不要以为唯一索引影响了 insert 速度，这个速度损耗可以忽略，但 高查找速度是明 显的;另外，即使在应用层做了非常完善的校验和控制，只要没有唯一索引，根据墨菲定律， 必然有脏数据产生。
